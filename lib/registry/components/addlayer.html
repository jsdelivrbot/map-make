<template id="addlayertemplate">
  <div>
  <div id="rasters">
    <div>Add a raster layer:</div>
    Code <input type="text" size="10" id="rastercode">
    <button id="addraster">Add</button>
  </div>
  <div id="vectors">
    Add vector file<br>
    Name/identifier <input type="text" size="10" id="vectorname">
    Url <input type="text" size="50" id="vectorfile">
    MongoDB? <input type="checkbox" id="mongodb" value="mongodb">
    <button id="addvector">Add</button>
  </div>
  </div>
</template>

<script type="module" id="addlayermodule">
  function $(s) { return document.getElementById(s) };
  var olMap = require('olMap');
  $('addlayer').style.display = 'none';
  $('toolbar').appendChild(document.importNode($('addlayerlink').import
      .getElementById('addlayertemplate').content, true));
  $('addraster').addEventListener('click', function() {
    System.import('registry/sources/' + $('rastercode').value)
    .then(function(m) {
      olMap.addRasters([m]);
    });
  });
  $('addvector').addEventListener('click', function() {
    var url = $('vectorfile').value;
    var option = {
      url: url,
      id: $('vectorname').value || url,
      add: true
    };
    if ($('mongodb').checked === true) {
      option.type = 'mongodb';
    }
    olMap.addVectors([option]);
  });
</script>
