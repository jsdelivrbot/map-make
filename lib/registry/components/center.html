<template id="centertemplate">
  <div id="centre">
    <div><button id="setLatLon">Go to</button> latitude <input type="text" size="5" id="lat"> longitude: <input type="text" size="5" id="lon">
     any valid latitude and longitude number in decimal format, such as '45.6789'; specify west and south values as negative numbers</div>
    </div>
  </div>
</template>

<script type="module">
  var utils = require('utils');
  var $ = utils.$;
  $('#addgoto').style.display = 'none';
  // make sure toolbar initialised
  require('components/toolbar');

  // add centertemplate to toolbar
  $('#widgets-content').appendChild(utils.importTemplate('center'));

  var ol = require('ol');
  var map = require('olMap').get();
  $('#setLatLon').addEventListener('click', function() {
    var coord = [parseFloat($('#lon').value),
        parseFloat($('#lat').value)];
    coord = ol.proj.transform(coord, 'EPSG:4326', map.getView().getProjection());
    if (!ol.extent.containsCoordinate(map.getView().extent, coord)) {
      alert('Coordinate outside map extent'); //FIXME English
    } else {
      map.getView().setCenter(coord);
    }
  });
</script>
