<template id="centertemplate">
  <div id="centre">
    <div><button id="setLatLon">Go to</button> latitude <input type="text" size="5" id="lat"> longitude: <input type="text" size="5" id="lon">
     any valid latitude and longitude number in decimal format, such as '45.6789'; specify west and south values as negative numbers</div>
    <div><button id="zoom">Zoom level</button> (number from 0 (zoomed out)): <input type="text" size="5" id="zoomlevel"> (number of zoom levels depends on the raster currently displayed: worldwide rasters may have 20 levels, country-specific ones far fewer.)
    </div>
  </div>
</template>

<script type="module">
  var $ = require('utils').$;
  $('addgoto').style.display = 'none';
  $('toolbar').appendChild(document
      .importNode(document.getElementById('centerlink').import
      .getElementById('centertemplate').content, true));
  var ol = require('ol');
  var map = require('olMap').get();
  $('setLatLon').addEventListener('click', function() {
    var coord = [parseFloat($('lon').value),
        parseFloat($('lat').value)];
    coord = ol.proj.transform(coord, 'EPSG:4326', map.getView().getProjection());
    if (!ol.extent.containsCoordinate(map.getView().extent, coord)) {
      alert('Coordinate outside map extent'); //FIXME English
    } else {
      map.getView().setCenter(coord);
    }
  });
  $('zoom').addEventListener('click', function() {
    map.getView().setZoom($('zoomlevel').value);
  });
</script>
