<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>OL3 Map-make</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ol3/3.4.0/ol.min.css">
  <!--<link rel="stylesheet" href="../modular-ol3/dist/olCustom.css">-->
  <script>
    // load Promises polyfill if not natively supported
    if (!window.Promise) {
      document.write(
        '<' + 'script src="https://es6-promises.s3.amazonaws.com/es6-promise-2.0.1.min.js"><\/script>'
      );
    }
  </script>
  <!--load module loader polyfill and system.js extensions-->
  <script src="https://jspm.io/system.js"></script>
  <script>
    System.componentCallback = function(e) {
      var scripts = e.target.import.getElementsByTagName('script');
      for (var i = 0; i < scripts.length; i++) {
        var script = scripts[i];
        if (script.type == 'module') {
          var source = script.innerHTML.substr(1);
          System.module(source)
          .catch(function(err) { setTimeout(function() { throw err; }); });
        }
      }
    };
    function importComponent(element, href) {
      var frag = document.createDocumentFragment();
      var link = document.createElement('link');
      link.rel = 'import';
      link.href = href;
      link.id = element + 'link';
      link.addEventListener('load', System.componentCallback);
      frag.appendChild(link);
      document.head.appendChild(frag);
    }
    // set paths specific to localhost
    // has to be done before importing toolbar component
    System.baseURL = System.baseURL + 'lib/';
    // override setting in jspm's system.js
    System.paths['*'] = '*.js';
    // only needed for fetching plugins; included in jspm's system.js
    // System.paths.jspm = "https://registry.jspm.io/*.js";
    // System.paths.github = 'https://github.jspm.io/*.js';
    System.paths.ol = '../../ol3/build/ol.js';
    // System.paths.ol = 'https://cdnjs.cloudflare.com/ajax/libs/ol3/3.4.0/ol.min.js';//../../gulpclosure/build/ol.js';

    System.import('map-make').catch(function(err) {
      console.log(err);
      alert('Error reading map-make.js');
      return;
    });
  </script>
  <link rel="import" href="lib/registry/components/toolbar.html" id="toolbarlink"
      onload="System.componentCallback(event)"></link>
  <link rel="import" href="lib/registry/components/layerswitcher.html" id="layerswitcherlink"
      onload="System.componentCallback(event)"></link>
</head>
<body>
  <!--<div id="map" style="height: 400px"></div>-->
  <!--<div id="mapDef" style="display:none">https://github.jspm.io/probins/map-make-samples/mapDefs/cataloniaVectors.json</div>-->
</body>
</html>
